
= Using this system to build Linux/RTAI

First build the linux kernel.  This uses the kernel.org tarball, with
packaging provided by a local git repo based on Debian's packaging of
the linux kernel.  Our local debian packaging of the linux kernel adds
the rtai patch and not much else.


= Modifying/updating Linux or RTAI

The original packaging of Linux/RTAI targets Linux 3.4.87 and RTAI 4.0
*plus* the ShabbyX/memleak mods.  So not RTAI 4.0 from Paolo.


== Modifying/updating Linux

The linux/linux-$(LINUX_VERSION/debian directory is a checkout of a
git branch.  The git repo is cloned and the branch checked out by make
when the debian/ directory does not exist, and is left alone otherwise.

The git repo & branch the the debian/ directory is initialized to (if
it does not exist) are configured at the top of the top-level Makefile.

The original debian/ packaging (for Linux 3.4.87 and rtai
4.0-shabby-111-g44557fc) was created from the Debian kernel packaging
repo:

    http://anonscm.debian.org/viewvc/kernel/

To access this SVN repo via git add this to your .git/config:

-----
    [svn-remote "dists-trunk"]
        url = svn://anonscm.debian.org/svn/kernel/dists/trunk/linux/debian/
        fetch = :refs/remotes/dists-trunk
-----

The original packaging was branched from r19214, which was the last
commit of the upstream packaging to support the 3.4 kernel.

Good info on working with the Debian packaging of the Linux kernel is
available in the Debian Linux Kernel Handbook:

    http://kernel-handbook.alioth.debian.org/


== Old notes to self

To build all debs:

    DEB_BUILD_OPTIONS=parallel=$(($(nproc)*2)) fakeroot debian/rules binary

To build just a particular deb:

    DEB_BUILD_OPTIONS=parallel=$(($(nproc)*2)) fakeroot make -f debian/rules.gen binary-arch_amd64_rtai   

To build a dsc:

    compile it with pbuilder:

        DEB_BUILD_OPTIONS=parallel=$(($(nproc)*3/2)) sudo -E pbuilder --build --aptcache pbuilder/aptcache --buildplace pbuilder --buildresult $PWD --basetgz pbuilder/wheezy-i386.tgz linux_*.dsc


